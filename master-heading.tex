\documentclass[a4paper,11pt,oneside]{book}
\usepackage[T1]{fontenc}
%\usepackage[utf8x]{inputenc}
\usepackage{bookman}
\usepackage{tipa}
\usepackage[usenames,dvipsnames]{color}
\usepackage{alltt}
\usepackage{keystroke}
\usepackage[romanian]{babel}
\usepackage{multind}
%\makeindex{en-ro}
\usepackage[left=2cm,top=3cm,right=1.5cm,bottom=2cm]{geometry}
\usepackage{float}
\usepackage[xetex,colorlinks]{hyperref}
 

\usepackage{fontspec}

\usepackage{fancyhdr}
%for custom blocks
\usepackage{environ}
\usepackage{indentfirst}
\usepackage[Lenny]{fncychap}
\usepackage{lineno}
\usepackage{textcomp}
\usepackage{eurosym}
\usepackage{titlesec}
\usepackage{needspace}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{fancyvrb}
\usepackage{exercise}

%for japanese
\usepackage[encapsulated]{CJK}
\usepackage{ucs}
\newcommand{\jptext}[1]{\begin{CJK}{UTF8}{min}#1\end{CJK}}

\usepackage[firstpage]{draftwatermark}
\SetWatermarkScale{1}

%fancy chars
\usepackage{dingbat}

\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

\lstdefinelanguage{pseudocod}{%
keywords={daca,atunci,altfel,start,sfarsit,citeste,afiseaza},%
basicstyle=\ttfamily,%
keywordstyle=\bfseries,%
showstringspaces=false,%
extendedchars}[keywords] 
 \lstset{
         basicstyle=\footnotesize\ttfamily, % Standardschrift
         numbers=left,               % Ort der Zeilennummern
         numberstyle=\tiny,          % Stil der Zeilennummern
         numbersep=5pt,              % Abstand der Nummern zum Text
         tabsize=4,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
                frame=b,         
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         xleftmargin=17pt,
         showstringspaces=false      % Leerzeichen in Strings anzeigen ?        
		  keywordstyle=\color{Red},
		stringstyle=\color{OliveGreen},
		identifierstyle=\color{Blue},
		frame=shadowbox,
		rulesepcolor=\color{Gray},
		escapeinside={\%*}{*)},         % if you want to add a comment within your code
		mathescape=false
 }
 


\setlength\marginparwidth{1cm}
\hypersetup{
%    bookmarks=true,         % show bookmarks bar?
    unicode=true,          % non-Latin characters in Acrobat’s bookmarks
    pdftoolbar=true,        % show Acrobat’s toolbar?
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=false,     % window fit to page when opened
    pdfstartview={FitH},    % fits the width of the page to the window
    pdftitle={Dezvoltare web cu PHP},    % title
    pdfauthor={Flavius Aspra},     % author
    pdfsubject={Programare},   % subject of the document
    pdfcreator={pdflatex},   % creator of the document
    pdfproducer={pdflatex}, % producer of the document
    pdfkeywords={programare php}, % list of keywords
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
%    urlcolor=red,           % color of external links
	linkbordercolor={1 0 0}
}

\renewcommand{\chaptermark}[1]{\markright{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}{}}

\fancyhead[LO,L]{Dezvoltare web cu PHP}
\fancyhead[RO,R]{\rightmark}
%\fancyfoot[CO,C] {}
\titleformat{\section}{\huge}{}{0em}{}

\renewcommand{\ExerciseName}{Exercițiu}
\renewcommand{\ExePartName}{{\goodbreak}Partea}
\renewcommand{\ExerciseHeader}{\needspace{5\baselineskip} \vskip .5em\hrule\vskip 1em\centerline{\textbf{\large\smallpencil
\ExerciseHeaderNB\ExerciseHeaderTitle%
\ExerciseHeaderDifficulty\ExerciseHeaderOrigin\medskip}}}
\makeatletter\def\endExerciseEnv{\termineliste{1}\@EndExeBox\nobreak\vskip .5em\hrule\vskip 1em\needspace{-10\baselineskip}}\makeatother

\newcommand{\attention}[1]{\vskip 1em\begin{Large}\leftpointright\end{Large}\parbox{15.9cm}{#1} \vskip 1em}
\newcommand{\good}[1]{\vskip 1em\begin{Large}\leftthumbsup\end{Large}\parbox{15.9cm}{#1}\vskip 1em}
\newcommand{\bad}[1]{\vskip 1em\begin{Large}\leftthumbsdown\end{Large}\parbox{15.9cm}{#1}\vskip 1em}

\newcommand{\engl}[2]{#1 (en. \textsl{#2})\index{en-ro}{#2}}

%chapter intros
\newenvironment{chapsummary}%
{\vskip -25pt\begin{itshape}}%
{\end{itshape}\vskip 5em}%

\def \phpro{\href{https://github.com/yet-another-project/phpro-book}{phpro}}
\def \get{{\texttt{\$\_GET}\kern3pt}}

%%numbering segments in verbatim
\makeatletter
\newcommand{\nl}[1]{\hbox to\z@{%
    \hss (#1) \kern3pt}}
\makeatother

\setlength{\headheight}{14.2pt}

\begin{document}
\pagestyle{empty}

\include{titlepage}
\setcounter{page}{2}
\include{copyrightpage}

%\setcounter{page}{-1}
\addtocontents{toc}{\protect\pagestyle{empty}}
\tableofcontents
\label{cuprins}

%introducere, ce, cine, cui, de ce
\fancyhead[RO,R]{}

\pagestyle{fancy}

